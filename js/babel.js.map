{"version":3,"sources":["node_modules/browser-pack/_prelude.js","_stream_0.js","src/app/deepLink/index.js","src/app/element/element.property.js","src/app/object/object.property.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_deepLink","deepLink","default","ele","console","log","DeepLink","options","arguments","undefined","_classCallCheck","this","_devices","windows","store","userAgent","android","ios","_os","_getUserAgent","_deepLinkEle","_options","Object","deepAssign","delay","support","appName","addDeepLink","key","navigator","match","_store","id","href","_ele","document","querySelectorAll","_self","_selfOptions","getDataset","_typeof","dataset","replace","_getStore","deepLinkOptions","onclick","event","preventDefault","stopImmediatePropagation","push","_this","onLoadOpen","_delay","setTimeout","_start","Date","getTime","_timeout","_now","clearTimeout","window","location","Element","prototype","attr","attributes","nameArr","valName","localName","substr","split","j","toUpperCase","value","addClass","className","classList","add","removeClass","remove","RegExp","join","hasClass","contains","test","assignObj","objs","_objs","Array","isArray","assign"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,CAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,gBCEA,MAAAK,EAAAX,EAAA,YAEA,IAAMY,EAAW,uCAAAC,QAAa,CAACC,IAAK,cACpCC,QAAQC,IAAIJ,wiBCLZZ,EAAA,0BACAA,EAAA,gCAGqBiB,aACjB,SAAAA,IAA2B,IAAdC,EAAc,EAAAC,UAAAX,aAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,gGAAIE,CAAAC,KAAAL,GACvBK,KAAKC,SAAW,CACZC,QAAS,CACLC,MAAO,uBACPC,UAAW,6BAEfC,QAAS,CACLF,MAAO,uBACPC,UAAW,YAEfE,IAAK,CACDH,MAAO,uCACPC,UAAW,sBAInBJ,KAAKO,IAAMP,KAAKQ,gBAEhBR,KAAKS,aAAe,GAEpBT,KAAKU,SAAWC,OAAOC,WAAW,CAC9BC,MAAO,IACPX,QAAS,CACLY,SAAS,GAEbT,QAAS,CACLS,SAAS,GAEbR,IAAK,CACDQ,SAAS,GAEbC,QAAS,IACVnB,GAECA,EAAQJ,KAAuB,KAAhBI,EAAQJ,KAAYQ,KAAKgB,YAAYpB,EAAQJ,uDAIhE,IAAK,IAAIyB,KAAOjB,KAAKC,SACjB,GAAIiB,UAAUd,UAAUe,MAAMnB,KAAKC,SAASgB,GAAKb,WAAY,OAAOa,EAExE,MAAO,4CAGc,IAAdrB,EAAc,EAAAC,UAAAX,aAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GACbuB,EAASpB,KAAKC,SAASD,KAAKO,KAEhC,GAAIX,EAAQI,KAAKO,KAAKc,GAClB,OAAQrB,KAAKO,KACT,IAAK,MAEGa,EADoB,KAApBxB,EAAQmB,QACCf,KAAKC,SAASK,IAAIH,MAAQP,EAAQmB,QAAU,MAAQnB,EAAQU,IAAIe,GAEhErB,KAAKC,SAASK,IAAIH,MAAQP,EAAQU,IAAIe,GACnD,MACJ,IAAK,UACL,IAAK,UACL,QACID,EAASpB,KAAKC,SAASD,KAAKO,KAAKJ,MAAQP,EAAQI,KAAKO,KAAKc,QAGhED,EAASxB,EAAQ0B,KAAO1B,EAAQ0B,KAAO,eAE9C,OAAOF,wCAGmC,IAAjC5B,EAAiC,EAAAK,UAAAX,aAAAY,IAAAD,UAAA,GAAAA,UAAA,GAA3B,YAAaD,EAAc,EAAAC,UAAAX,aAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAClCa,EAAWC,OAAOC,WAAWZ,KAAKU,SAAUd,GAC5C2B,EAAOC,SAASC,iBAAiBjC,GACjCkC,EAAQ1B,KACR2B,EAAe,GAEnB,GAAiB,UAAb3B,KAAKO,IACL,IAAK,IAAIhC,EAAI,EAAGA,EAAIgD,EAAKrC,OAAQX,IAAK,CASlC,GARAoD,EAAehB,OAAOC,WAAW,GAAIF,GAErCa,EAAKhD,GAAGqD,cAGHD,EAAaL,MAAQC,EAAKhD,GAAG+C,OAAMK,EAAaL,KAAOC,EAAKhD,GAAG+C,MAGrC,WAA3BO,EAAON,EAAKhD,GAAGuD,SACf,IAAK,IAAIb,KAAOM,EAAKhD,GAAGuD,QACpB,OAAQb,GACJ,IAAK,YACL,IAAK,QACL,IAAK,YACDU,EAAaV,EAAIc,QAAQ,KAAM,KAAKV,GAAKE,EAAKhD,GAAGuD,QAAQb,GACzD,MACJ,IAAK,cACL,IAAK,UACL,IAAK,cACDU,EAAaV,EAAIc,QAAQ,OAAQ,KAAKzC,SAAWiC,EAAKhD,GAAGuD,QAAQb,GACjE,MACJ,QACIU,EAAaV,GAAOM,EAAKhD,GAAGuD,QAAQb,GAMhDU,EAAa3B,KAAKO,KAAKO,UACnBa,EAAa3B,KAAKO,KAAKjB,WAAUqC,EAAarC,SAAWqC,EAAa3B,KAAKO,KAAKjB,UAEpFqC,EAAaxB,MAAQH,KAAKgC,UAAUL,GAEpCJ,EAAKhD,GAAG0D,gBAAkBtB,OAAOC,WAAW,GAAIe,GAEhDJ,EAAKhD,GAAG2D,QAAU,SAAUC,GAMxB,OALAA,EAAMC,iBACND,EAAME,2BAENX,EAAMzC,KAAKe,KAAKiC,kBAET,GAGXjC,KAAKS,aAAa6B,KAAKf,EAAKhD,KAKxC,OAAOyB,KAAKS,4CAGwB,IAAA8B,EAAAvC,KAAlCJ,EAAkC,EAAAC,UAAAX,aAAAY,IAAAD,UAAA,GAAAA,UAAA,GAAxB,GAAI2C,EAAoB,EAAA3C,UAAAX,aAAAY,IAAAD,UAAA,IAAAA,UAAA,GAChCa,EAAWC,OAAOC,WAAWZ,KAAKU,SAAUd,GAC5C6C,EAASD,GAA2B,YAAbxC,KAAKO,IAAoB,IAAM,EAM1D,OAJKG,EAASP,QAAOO,EAASP,MAAQH,KAAKgC,UAAUtB,IAEhDA,EAASV,KAAKO,KAAKO,UAASJ,EAASV,KAAKO,KAAKO,QAAUd,KAAKU,SAASV,KAAKO,KAAKO,SAE/E4B,WAAW,WACd,IAAIC,GAAS,IAAIC,MAAOC,UACxB,GAAInC,EAAS6B,EAAKhC,KAAKO,QACnB,GAAIJ,EAASpB,SAAU,CACnB,IAAIwD,EAAWJ,WAAW,WAEtB,IAAIK,GAAO,IAAIH,MAAOC,UAGtBG,aAAaF,GAETC,EAAOJ,GAAUjC,EAASG,QAG9BoC,OAAOC,SAAWxC,EAASP,QAC5BO,EAASG,OAGZoC,OAAOC,SAAWxC,EAASpB,cACxB2D,OAAOC,SAAWxC,EAASP,WAC/B8C,OAAOC,SAAWxC,EAASY,MACnCmB,8BAGK,OAAOzC,KAAKO,qCAEN,OAAOP,KAAKS,gCAjKbd,8FCHrBwD,QAAQC,UAAUxB,WAAa,WAC3B,IAAK5B,KAAK8B,QAAS,CACf,IAAIuB,EAAOrD,KAAKsD,WACZC,EAAU,GACVC,EAAU,GAEdxD,KAAK8B,QAAU,GAEf,IAAK,IAAIvD,EAAI,EAAGA,EAAI8E,EAAKnE,OAAQX,IAC7B,GAAuC,UAAnC8E,EAAK9E,GAAGkF,UAAUC,OAAO,EAAG,GAAgB,CAC5CH,EAAUF,EAAK9E,GAAGkF,UAAUE,MAAM,KAClCH,EAAU,GAEV,IAAK,IAAII,EAAI,EAAGA,EAAIL,EAAQrE,OAAQ0E,IAChCJ,GAAiB,IAANI,EAAUL,EAAQK,GAAML,EAAQK,GAAGF,OAAO,EAAG,GAAGG,cAAgBN,EAAQK,GAAGF,OAAO,GAEjG1D,KAAK8B,QAAQ0B,GAAWH,EAAK9E,GAAGuF,OAK5C,OAAO9D,KAAK8B,SAIhBqB,QAAQC,UAAUW,SAAW,SAAUC,GAC/BhE,KAAKiE,UACLjE,KAAKiE,UAAUC,IAAIF,GAEnBhE,KAAKgE,WAAa,IAAMA,GAIhCb,QAAQC,UAAUe,YAAc,SAAUH,GAClChE,KAAKiE,UACLjE,KAAKiE,UAAUG,OAAOJ,GAEtBhE,KAAKgE,UAAYhE,KAAKgE,UAAUjC,QAAQ,IAAIsC,OAAO,UAAYL,EAAUL,MAAM,KAAKW,KAAK,KAAO,UAAW,MAAO,MAI1HnB,QAAQC,UAAUmB,SAAW,SAAUP,GAQnC,OALIhE,KAAKiE,UACOjE,KAAKiE,UAAUO,SAASR,GAExB,IAAIK,OAAO,QAAUL,EAAY,QAAS,MAAMS,KAAKzE,KAAKgE,iQC/C9ErD,OAAOC,WAAa,WAChB,OAEA,SAAS8D,EAAWC,GAChB,IAAIC,EAAQ,GAEZ,IAAK,IAAIrG,EAAI,EAAGA,EAAIoG,EAAKzF,OAAQX,IAC7B,GAAuB,WAAnBsD,EAAO8C,EAAKpG,IACZ,IAAK,IAAI0C,KAAO0D,EAAKpG,GACjB,GAA4B,WAAxBsD,EAAO8C,EAAKpG,GAAG0C,KAAsB4D,MAAMC,QAAQH,EAAKpG,GAAG0C,IAE1D,GAAI4D,MAAMC,QAAQH,EAAKpG,GAAG0C,IAAO,CAClC2D,EAAM3D,GAAO,GAEb,IAAK,IAAI2C,EAAI,EAAGA,EAAIe,EAAKpG,GAAG0C,GAAK/B,OAAQ0E,IACN,WAA3B/B,EAAO8C,EAAKpG,GAAG0C,GAAK2C,IACpBgB,EAAM3D,GAAKqB,KAAKoC,EAAU,CAAC,GAAIC,EAAKpG,GAAG0C,GAAK2C,MAE5CgB,EAAM3D,GAAKqB,KAAKqC,EAAKpG,GAAG0C,GAAK2C,SAGrCgB,EAAM3D,GAAO0D,EAAKpG,GAAG0C,QAXrB2D,EAAM3D,GAAOyD,EAAU,CAACE,EAAM3D,GAAO2D,EAAM3D,GAAO,GAAI0D,EAAKpG,GAAG0C,KAgB9E,OAAO2D,EAzBJF,CAAU7E,YA6BQ,mBAAlBc,OAAOoE,SACdpE,OAAOoE,OAASpE,OAAOC","file":"babel.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// start coding with es6\r\n// if need es5 coding, change gulp.options.js > gulpOptions.es5: true\r\nimport DeepLink from 'deepLink';\r\n\r\nconst deepLink = new DeepLink({ele: '.deepLink'});\r\nconsole.log(deepLink);\r\n","import 'object/object.property';\r\nimport 'element/element.property';\r\n\r\n// deep link\r\nexport default class DeepLink {\r\n    constructor (options = {}) {\r\n        this._devices = {\r\n            windows: {    // window phone\r\n                store: 'zune:navigate?appid=',\r\n                userAgent: /Windows\\s+Phone|IEMobile/i\r\n            },\r\n            android: {    // android system\r\n                store: 'market://details?id=',\r\n                userAgent: /Android/i\r\n            },\r\n            ios: {    // ios\r\n                store: 'itms-apps://itunes.apple.com/hk/app/',\r\n                userAgent: /iPhone|iPad|iPod/i\r\n            }\r\n        };\r\n\r\n        this._os = this._getUserAgent();\r\n\r\n        this._deepLinkEle = [];\r\n\r\n        this._options = Object.deepAssign({\r\n            delay: 300,\r\n            windows: {\r\n                support: false\r\n            },\r\n            android: {\r\n                support: true\r\n            },\r\n            ios: {\r\n                support: true\r\n            },\r\n            appName: ''\r\n        }, options);\r\n\r\n        if (options.ele && options.ele !== '') this.addDeepLink(options.ele);\r\n    }\r\n\r\n    _getUserAgent () {\r\n        for (let key in this._devices)\r\n            if (navigator.userAgent.match(this._devices[key].userAgent)) return key;\r\n\r\n        return 'other';\r\n    }\r\n\r\n    _getStore (options = {}) {\r\n        let _store = this._devices[this._os];\r\n\r\n        if (options[this._os].id) {\r\n            switch (this._os) {\r\n                case 'ios':\r\n                    if (options.appName !== '')\r\n                        _store = this._devices.ios.store + options.appName + '/id' + options.ios.id;\r\n                    else\r\n                        _store = this._devices.ios.store + options.ios.id;\r\n                    break;\r\n                case 'windows':\r\n                case 'android':\r\n                default:\r\n                    _store = this._devices[this._os].store + options[this._os].id;\r\n                    break;\r\n            }\r\n        } else _store = options.href ? options.href : 'javascript:;';\r\n\r\n        return _store;\r\n    }\r\n\r\n    addDeepLink (ele = '.deepLink', options = {}) {\r\n        let _options = Object.deepAssign(this._options, options),\r\n            _ele = document.querySelectorAll(ele),\r\n            _self = this,\r\n            _selfOptions = {};\r\n\r\n        if (this._os !== 'other') {\r\n            for (let i = 0; i < _ele.length; i++) {\r\n                _selfOptions = Object.deepAssign({}, _options);\r\n\r\n                _ele[i].getDataset();\r\n\r\n                /*----------  href  ----------*/\r\n                if (!_selfOptions.href && _ele[i].href) _selfOptions.href = _ele[i].href;\r\n\r\n                /*----------  self options from dataset  ----------*/\r\n                if (typeof _ele[i].dataset === 'object') {\r\n                    for (let key in _ele[i].dataset) {\r\n                        switch (key) {\r\n                            case 'androidId':\r\n                            case 'iosId':\r\n                            case 'windowsId':\r\n                                _selfOptions[key.replace('Id', '')].id = _ele[i].dataset[key];\r\n                                break;\r\n                            case 'androidLink':\r\n                            case 'iosLink':\r\n                            case 'windowsLink':\r\n                                _selfOptions[key.replace('Link', '')].deepLink = _ele[i].dataset[key];\r\n                                break;\r\n                            default:\r\n                                _selfOptions[key] = _ele[i].dataset[key];\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (_selfOptions[this._os].support) {\r\n                    if (_selfOptions[this._os].deepLink) _selfOptions.deepLink = _selfOptions[this._os].deepLink;\r\n\r\n                    _selfOptions.store = this._getStore(_selfOptions);\r\n\r\n                    _ele[i].deepLinkOptions = Object.deepAssign({}, _selfOptions);\r\n\r\n                    _ele[i].onclick = function (event) {\r\n                        event.preventDefault();\r\n                        event.stopImmediatePropagation();\r\n\r\n                        _self.call(this.deepLinkOptions);\r\n\r\n                        return true;\r\n                    };\r\n\r\n                    this._deepLinkEle.push(_ele[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return this._deepLinkEle;\r\n    }\r\n\r\n    call (options = {}, onLoadOpen = false) {\r\n        let _options = Object.deepAssign(this._options, options),\r\n            _delay = onLoadOpen && this._os === 'android' ? 500 : 0;\r\n\r\n        if (!_options.store) _options.store = this._getStore(_options);\r\n\r\n        if (!_options[this._os].support) _options[this._os].support = this._options[this._os].support;\r\n\r\n        return setTimeout(() => {\r\n            let _start = new Date().getTime();\r\n            if (_options[this._os].support) {\r\n                if (_options.deepLink) {\r\n                    let _timeout = setTimeout(() => {\r\n                        // Get current time\r\n                        let _now = new Date().getTime();\r\n\r\n                        // clear timeout\r\n                        clearTimeout(_timeout);\r\n\r\n                        if (_now - _start >= _options.delay) return;\r\n\r\n                        // Open store or original link\r\n                        window.location = _options.store;\r\n                    }, _options.delay);\r\n\r\n                    // try open deep link\r\n                    window.location = _options.deepLink;\r\n                } else window.location = _options.store;\r\n            } else window.location = _options.href;\r\n        }, _delay);\r\n    }\r\n\r\n    get os () { return this._os; }\r\n\r\n    get deepLink () { return this._deepLinkEle; }\r\n}\r\n","// ie get dataset value\r\nElement.prototype.getDataset = function () {\r\n    if (!this.dataset) {\r\n        let attr = this.attributes,\r\n            nameArr = [],\r\n            valName = '';\r\n\r\n        this.dataset = {};\r\n\r\n        for (let i = 0; i < attr.length; i++) {\r\n            if (attr[i].localName.substr(0, 5) === 'data-') {\r\n                nameArr = attr[i].localName.split('-');\r\n                valName = '';\r\n\r\n                for (let j = 1; j < nameArr.length; j++)\r\n                    valName += j === 1 ? nameArr[j] : (nameArr[j].substr(0, 1).toUpperCase() + nameArr[j].substr(1));\r\n\r\n                this.dataset[valName] = attr[i].value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return this.dataset;\r\n};\r\n\r\n// add class without jq\r\nElement.prototype.addClass = function (className) {\r\n    if (this.classList)\r\n        this.classList.add(className);\r\n    else\r\n        this.className += ' ' + className;\r\n};\r\n\r\n// remove class without jq\r\nElement.prototype.removeClass = function (className) {\r\n    if (this.classList)\r\n        this.classList.remove(className);\r\n    else\r\n        this.className = this.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n};\r\n\r\n// has class without jq\r\nElement.prototype.hasClass = function (className) {\r\n    let _hasClass = false;\r\n\r\n    if (this.classList)\r\n        _hasClass = this.classList.contains(className);\r\n    else\r\n        _hasClass = new RegExp('(^| )' + className + '( |$)', 'gi').test(this.className);\r\n\r\n    return _hasClass;\r\n};\r\n","// Object.assign (IE support)\r\nObject.deepAssign = function () {\r\n    return assignObj(arguments);\r\n\r\n    function assignObj (objs) {\r\n        let _objs = {};\r\n\r\n        for (let i = 0; i < objs.length; i++) {\r\n            if (typeof objs[i] === 'object') {\r\n                for (let key in objs[i]) {\r\n                    if (typeof objs[i][key] === 'object' && !Array.isArray(objs[i][key]))\r\n                        _objs[key] = assignObj([_objs[key] ? _objs[key] : {}, objs[i][key]]);\r\n                    else if (Array.isArray(objs[i][key])) {\r\n                        _objs[key] = [];\r\n\r\n                        for (let j = 0; j < objs[i][key].length; j++) {\r\n                            if (typeof objs[i][key][j] === 'object')\r\n                                _objs[key].push(assignObj([{}, objs[i][key][j]]));\r\n                            else\r\n                                _objs[key].push(objs[i][key][j]);\r\n                        }\r\n                    } else\r\n                        _objs[key] = objs[i][key];\r\n                }\r\n            }\r\n        }\r\n\r\n        return _objs;\r\n    }\r\n};\r\n\r\nif (typeof Object.assign !== 'function')\r\n    Object.assign = Object.deepAssign;\r\n"]}