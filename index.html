<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
	<title>CLP</title>
	<style type="text/css">
		.deepLink {display: none;}
	</style>
</head>
<body>
	<a id="deepLink" class="deepLink" href="https://services.clp.com.hk/download.html" data-app="clphk://external.deeplink" data-store-android="com.cherrypicks.clp" data-store-ios="clp-hong-kong/id450725907">test</a>

	<script src="deep-link.js" type="text/javascript"></script>

	<script>
		function ready(fn) {
		  if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading"){
		    fn();
		  } else {
		    document.addEventListener('DOMContentLoaded', fn);
		  }
		}

		ready(function() {
				var deepLink = document.getElementById("deepLink").getAttribute('data-app'),
					path = window.location.href.split("?");

				if (path.length > 1) {
					deepLink += '?' + path[1];
				}

			if(navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/iPhone|iPad|iPod/i)) {
				document.getElementById("deepLink").setAttribute('href', deepLink);
			}

			document.getElementById("deepLink").click();
		});
	</script>
</body>
</html>